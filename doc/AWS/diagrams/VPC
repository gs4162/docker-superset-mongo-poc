graph TD;

  subgraph AWS-VPC[AWS VPC 10.0.0.0/16]
    
    subgraph PublicSubnet[Public Subnet 10.0.1.0/24]
        Nginx[Nginx EC2<br>10.0.1.10]
        IGW[Internet Gateway]
        Nginx --> IGW
        SG_Public[Security Group<br>SG-Public]
        Nginx --> SG_Public
    end
    
    subgraph PrivateSubnet1[Private Subnet 1 10.0.2.0/24]
      PyScript1[Python Script EC2<br>10.0.2.10]
      MongoDB1[MongoDB EC2<br>10.0.2.11]
      Superset1[Superset EC2<br>10.0.2.12]
      SG_Private1[Security Group<br>SG-Private1]
      PyScript1 --> SG_Private1
      MongoDB1 --> SG_Private1
      Superset1 --> SG_Private1
    end

    subgraph PrivateSubnet2[Private Subnet 2 10.0.3.0/24]
      PyScript2[Python Script EC2<br>10.0.3.10]
      MongoDB2[MongoDB EC2<br>10.0.3.11]
      Superset2[Superset EC2<br>10.0.3.12]
      SG_Private2[Security Group<br>SG-Private2]
      PyScript2 --> SG_Private2
      MongoDB2 --> SG_Private2
      Superset2 --> SG_Private2
    end
    
    NAT[NAT Gateway<br>10.0.1.5]
    PrivateSubnet1 --> NAT
    PrivateSubnet2 --> NAT
    NAT --> IGW
  end
